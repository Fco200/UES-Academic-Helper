<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soporte y Opiniones | UES Helper</title>
    <link rel="icon" type="image/png" href="logo.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/all.min.css">
    <style>
        :root { --ues-guinda: #800000; --ues-oro: #FFD700; }
        body { 
            background: #000; color: #eee; font-family: 'Inter', sans-serif; margin: 0;
            background-image: radial-gradient(circle at 50% 50%, #1a0000 0%, #000 100%);
        }
        .sidebar { width: 280px; background: rgba(15,15,15,0.98); border-right: 1px solid rgba(128,0,0,0.3); height: 100vh; position: fixed; padding: 30px; }
        .main-content { margin-left: 280px; padding: 60px 40px; display: flex; justify-content: center; }
        
        .glass-card { 
            background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(128, 0, 0, 0.3);
            border-radius: 30px; padding: 45px; width: 100%; max-width: 650px;
            backdrop-filter: blur(10px); box-shadow: 0 15px 35px rgba(0,0,0,0.5);
        }
        
        .form-control { 
            background: rgba(0,0,0,0.5) !important; border: 1px solid #444 !important; 
            color: white !important; border-radius: 15px; padding: 15px; transition: 0.3s;
        }
        .form-control:focus { border-color: var(--ues-guinda) !important; box-shadow: 0 0 15px rgba(128,0,0,0.2) !important; }
        
        .btn-send { 
            background: var(--ues-guinda); color: white; border: none; padding: 18px; 
            border-radius: 15px; font-weight: 800; text-transform: uppercase; letter-spacing: 1px;
            transition: 0.4s; width: 100%;
        }
        .btn-send:hover { background: #a00000; transform: translateY(-3px); box-shadow: 0 10px 20px rgba(128,0,0,0.3); }
        
        .nav-link-custom { color: #888; padding: 12px; border-radius: 12px; display: block; text-decoration: none; margin-bottom: 10px; transition: 0.3s; }
        .nav-link-custom:hover, .nav-link-custom.active { background: var(--ues-guinda); color: white; }
    </style>
</head>
<body>

    <div class="sidebar">
        <h4 class="fw-bold mb-5 text-white">UES <span class="text-danger">HELPER</span></h4>
        <nav>
            <a href="/home.html" class="nav-link-custom"><i class="fas fa-home me-2"></i> Inicio</a>
            <a href="/dashboard.html" class="nav-link-custom"><i class="fas fa-tasks me-2"></i> Tareas</a>
            <a href="/perfil.html" class="nav-link-custom"><i class="fas fa-user-circle me-2"></i> Mi Perfil</a>
            <a href="/soporte.html" class="nav-link-custom active"><i class="fas fa-headset me-2"></i> Soporte / Opini贸n</a>
        </nav>
    </div>

    <div class="main-content">
        <div class="glass-card">
            <div class="text-center mb-5">
                <i class="fas fa-paper-plane text-danger fa-3x mb-3"></i>
                <h2 class="fw-bold text-white">Mejoras y Opiniones</h2>
                <p class="text-muted">Ay煤danos a que el portal UES sea el mejor sistema acad茅mico.</p>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="small fw-bold text-muted mb-2">TU NOMBRE</label>
                    <input type="text" id="sugNombre" class="form-control" placeholder="Ej. Francisco">
                </div>
                <div class="col-md-6 mb-3">
                    <label class="small fw-bold text-muted mb-2">TU CORREO</label>
                    <input type="email" id="sugEmail" class="form-control" placeholder="estudiante@ues.mx">
                </div>
            </div>

            <div class="mb-4">
                <label class="small fw-bold text-muted mb-2">TIPO DE MENSAJE</label>
                <select id="sugTipo" class="form-control">
                    <option value="Sugerencia"> Sugerencia de mejora</option>
                    <option value="Error">锔 Reportar un error (Bug)</option>
                    <option value="Opinion"> Opini贸n general</option>
                </select>
            </div>

            <div class="mb-5">
                <label class="small fw-bold text-muted mb-2">MENSAJE DETALLADO</label>
                <textarea id="sugMensaje" class="form-control" rows="5" placeholder="Escribe aqu铆 tu mensaje..."></textarea>
            </div>

            <button onclick="enviarSugerencia()" class="btn btn-send">
                Enviar Comentario <i class="fas fa-chevron-right ms-2"></i>
            </button>

            <div id="statusMsg" class="mt-4 text-center d-none">
                <span class="badge bg-success p-2 px-3 rounded-pill">隆Mensaje enviado con 茅xito!</span>
            </div>
        </div>
        
    </div>
    <div class="row g-4 mt-5">
    <div class="col-md-6">
        <div class="glass-card p-4 text-center h-100 border-start border-4 border-danger">
            <i class="fas fa-envelope-open-text text-danger fa-2x mb-3"></i>
            <h5 class="fw-bold text-white">Correo Directo Admin</h5>
            <p class="text-muted small">Para asuntos t茅cnicos urgentes o colaboraci贸n, contacta a Francisco:</p>
            <a href="mailto:FranciscoAguayo2005@gmail.com" class="text-danger fw-bold text-decoration-none">FranciscoAguayo2005@gmail.com</a>
        </div>
    </div>

    <div class="col-md-6">
        <div class="glass-card p-4 text-center h-100 border-start border-4 border-warning">
            <i class="fab fa-whatsapp text-success fa-2x mb-3"></i>
            <h5 class="fw-bold text-white">WhatsApp de Soporte</h5>
            <p class="text-muted small">Atenci贸n inmediata para errores de acceso o sugerencias r谩pidas:</p>
            <a href="https://wa.me/526625374491" target="_blank" class="text-success fw-bold text-decoration-none">+52 662 537 4491</a>
        </div>
    </div>
</div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        async function enviarSugerencia() {
            const btn = document.querySelector('.btn-send');
            const datos = {
                nombre: document.getElementById('sugNombre').value,
                email: document.getElementById('sugEmail').value,
                mensaje: `[${document.getElementById('sugTipo').value}] - ${document.getElementById('sugMensaje').value}`
            };

            if (!datos.nombre || !datos.mensaje) return alert("Por favor completa los campos principales.");

            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Enviando...';
            btn.disabled = true;

            try {
                const res = await fetch('/enviar-sugerencia', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(datos)
                });

                if (res.ok) {
                    document.getElementById('statusMsg').classList.remove('d-none');
                    btn.innerHTML = 'Enviado <i class="fas fa-check"></i>';
                    setTimeout(() => location.reload(), 2000);
                } else {
                    alert("Error al enviar. Verifica tu conexi贸n.");
                    btn.innerHTML = 'Enviar Comentario';
                    btn.disabled = false;
                }
            } catch (e) {
                console.error(e);
                alert("Error de red.");
                btn.disabled = false;
            }
        }
        // Seguridad: Si no hay un correo en el localStorage, regresa al inicio
if (!localStorage.getItem('userEmail')) {
    window.location.href = '/bienvenida.html';
}
    </script>
</body>
</html>