<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soporte | UES Helper</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root { --ues-guinda: #800000; --bg: #f8f9fa; }
        body { background: var(--bg); color: #333; font-family: 'Plus Jakarta Sans', sans-serif; }
        .sidebar { width: 280px; background: white; border-right: 1px solid #ddd; height: 100vh; position: fixed; padding: 30px; }
        .main-content { margin-left: 280px; padding: 60px 40px; }
        
        .glass-card { background: white; border: 1px solid #eee; border-radius: 30px; padding: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        .form-control { background: #fdfdfd !important; border: 1px solid #ddd !important; color: #111 !important; border-radius: 15px; padding: 15px; }
        .btn-send { background: var(--ues-guinda); color: white; border: none; padding: 18px; border-radius: 15px; font-weight: 800; width: 100%; transition: 0.3s; }
        .btn-send:hover { background: #a00000; transform: translateY(-3px); }
        
        .nav-link-custom { color: #555; padding: 12px; border-radius: 12px; display: block; text-decoration: none; margin-bottom: 10px; font-weight: 600; }
        .nav-link-custom.active { background: var(--ues-guinda); color: white; }
    </style>
</head>
<body>

    <div class="sidebar">
        <h4 class="fw-bold mb-5 text-dark">UES <span class="text-danger">HELPER</span></h4>
        <nav>
            <a href="/home.html" class="nav-link-custom"><i class="fas fa-home me-2"></i> Inicio</a>
            <a href="/dashboard.html" class="nav-link-custom"><i class="fas fa-tasks me-2"></i> Tareas</a>
            <a href="/perfil.html" class="nav-link-custom"><i class="fas fa-user-circle me-2"></i> Mi Perfil</a>
            <a href="/seguridad.html" class="nav-link-custom"><i class="fas fa-shield-alt me-2 text-danger"></i> Seguridad</a>
            <a href="/soporte.html" class="nav-link-custom active"><i class="fas fa-headset me-2"></i> Soporte</a>
        </nav>
    </div>

    <div class="main-content">
        <div class="container-fluid" style="max-width: 900px;">
            <div class="glass-card mb-5">
                <div class="text-center mb-5">
                    <i class="fas fa-paper-plane text-danger fa-3x mb-3"></i>
                    <h2 class="fw-bold text-dark">Buz√≥n de Sugerencias</h2>
                    <p class="text-muted">Tu opini√≥n nos ayuda a mejorar el sistema.</p>
                </div>

                <div class="row">
                    <div class="col-md-6 mb-3"><label class="small fw-bold text-muted mb-2">NOMBRE</label><input type="text" id="sugNombre" class="form-control" placeholder="Tu nombre"></div>
                    <div class="col-md-6 mb-3"><label class="small fw-bold text-muted mb-2">CORREO</label><input type="email" id="sugEmail" class="form-control"></div>
                </div>
                <div class="mb-3">
                    <label class="small fw-bold text-muted mb-2">CATEGOR√çA</label>
                    <select id="sugTipo" class="form-control"><option value="Sugerencia">üí° Sugerencia</option><option value="Error">‚ö†Ô∏è Error / Bug</option></select>
                </div>
                <div class="mb-4"><textarea id="sugMensaje" class="form-control" rows="4" placeholder="¬øEn qu√© podemos mejorar?"></textarea></div>
                <button onclick="enviarSugerencia()" class="btn btn-send shadow">ENVIAR COMENTARIO</button>
            </div>

            <div class="row g-4">
                <div class="col-md-6"><div class="glass-card p-4 border-start border-4 border-success text-center">
                    <i class="fab fa-whatsapp text-success fa-2x mb-2"></i>
                    <h5 class="fw-bold text-dark">WhatsApp Directo</h5>
                    <button onclick="contactarSoporte()" class="btn btn-success w-100 rounded-pill mt-2">Chat con Soporte</button>
                </div></div>
                <div class="col-md-6"><div class="glass-card p-4 border-start border-4 border-danger text-center">
                    <i class="fas fa-envelope text-danger fa-2x mb-2"></i>
                    <h5 class="fw-bold text-dark">Correo Admin</h5>
                    <p class="text-muted small m-0">franciscoaguayo2005@gmail.com</p>
                </div></div>
            </div>
        </div>
    </div>

    <script>
        const userEmail = localStorage.getItem('userEmail');
        window.onload = () => { if(!userEmail) window.location.href='/index.html'; document.getElementById('sugEmail').value = userEmail; };

        async function enviarSugerencia() {
            const btn = document.querySelector('.btn-send');
            const datos = { nombre: document.getElementById('sugNombre').value, email: document.getElementById('sugEmail').value, mensaje: `[${document.getElementById('sugTipo').value}] - ${document.getElementById('sugMensaje').value}` };
            if (!datos.nombre || !datos.mensaje) return alert("Completa los campos.");
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ENVIANDO...';
            try {
                const res = await fetch('/enviar-sugerencia', { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify(datos) });
                if (res.ok) { alert("¬°Enviado!"); location.reload(); }
            } catch (e) { alert("Error de red."); btn.innerHTML = 'ENVIAR COMENTARIO'; }
        }

        function contactarSoporte() {
            window.open(`https://wa.me/526625374491?text=Hola, necesito ayuda con UES Helper`, '_blank');
        }

        function cerrarSesion() { localStorage.clear(); window.location.href = '/index.html'; }
    </script>
</body>
</html>